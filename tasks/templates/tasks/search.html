{% extends 'base.html' %} {% block content %}
<h1>Search Tasks</h1>

<!-- Search Form -->
<div style="margin-bottom: 30px;">
    <form method="get" action="{% url 'tasks:search' %}">
        <input type="text" name="q" value="{{ query }}" placeholder="Search by task title or description..." style="padding: 8px; width: 300px; margin-right: 10px;">
        <button type="submit" style="padding: 8px 15px;">Search</button> {% if query %}
        <a href="{% url 'tasks:search' %}" style="margin-left: 10px;">Clear Search</a> {% endif %}
    </form>
</div>

<!-- Search Results -->
{% if query %}
<h3>Search Results for "{{ query }}"</h3>
<p>Found {{ results_count }} pending task{{ results_count|pluralize }}</p>

{% if tasks %} {% for task in tasks %}
<div style="border: 1px solid #ccc; margin: 10px; padding: 10px;">
    <h3>{{ task.title }}</h3>
    <p><strong>Category:</strong> {{ task.category.name }}</p>
    <p><strong>Due:</strong> {{ task.due_date }}</p>
    <p><strong>Priority:</strong> {{ task.get_priority_display }}</p>
    {% if task.description %}
    <p><strong>Description:</strong> {{ task.description }}</p>
    {% endif %}

    <!-- Action Buttons -->
    <div style="margin-top: 10px;">
        <a href="{% url 'tasks:task_update' task.pk %}" style="margin-right: 10px;">Edit</a>
        <a href="{% url 'tasks:task_delete' task.pk %}" style="margin-right: 10px; color: #dc3545;">Delete</a>
        <a href="{% url 'tasks:task_complete' task.pk %}" style="color: #28a745;">Mark as Done</a>
    </div>
</div>
{% endfor %} {% else %}
<p>No pending tasks found matching your search.</p>
{% endif %} {% else %}
<p>Enter a search term above to find your pending tasks.</p>
{% endif %}

<div style="margin-top: 30px;">
    <a href="{% url 'tasks:dashboard' %}">Back to Dashboard</a>
</div>
{% endblock %}